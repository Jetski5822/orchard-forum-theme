@{ 
    Script.Require("Markdown_Editor");
    Script.Include("jquery.textarearesizer.custom.js");
    Style.Include("forum-markdown.css");
    Script.Include("markdown-custom.js");
    Script.Include("markdowneditor-custom.js");
    string idPostfix = @Html.FieldIdFor(m => m) + "-" + @Model.PostPart.Id;
}
<div class="wmd-box has-grip">
    <div class="wmd-innerbox">
        <div class="wmd-editor-box">
            <div id="wmd-button-bar-@idPostfix" class="wmd-button-bar"></div>

            @Html.TextArea("Text", (string)Model.Text,
                           new Dictionary<string, object> {
                               {"id", "wmd-input" + "-" + idPostfix},
                               {"class", "wmd-input"},
                               {"data-mediapicker-uploadpath", Model.AddMediaPath},
                               {"data-mediapicker-title", T("Insert/Update Media")}
                           })
        </div>

        <div class="wmd-preview-box">
            <div id="wmd-preview-@idPostfix" class="wmd-panel wmd-preview"></div>
        </div>
        
        <a class="toggle-preview" href="#">@T("« Hide Preview")</a> 
    </div>
</div>
